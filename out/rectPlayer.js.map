{"version":3,"sources":["webpack:///webpack/universalModuleDefinition","webpack:///webpack/bootstrap","webpack:///./RectPlayer/PlayerItem.ts","webpack:///./RectPlayer/PlayerModel.ts","webpack:///./RectPlayer/RectPlayer.ts","webpack:///./RectPlayer/RectplayerTemplateResolver.ts","webpack:///./RectPlayer/SourceCore.ts","webpack:///./RectPlayer/Utils.ts"],"names":[],"mappings":"AAAA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA,CAAC;AACD,O;QCVA;QACA;;QAEA;QACA;;QAEA;QACA;QACA;QACA;QACA;QACA;QACA;QACA;QACA;QACA;;QAEA;QACA;;QAEA;QACA;;QAEA;QACA;QACA;;;QAGA;QACA;;QAEA;QACA;;QAEA;QACA;QACA;QACA,0CAA0C,gCAAgC;QAC1E;QACA;;QAEA;QACA;QACA;QACA,wDAAwD,kBAAkB;QAC1E;QACA,iDAAiD,cAAc;QAC/D;;QAEA;QACA;QACA;QACA;QACA;QACA;QACA;QACA;QACA;QACA;QACA;QACA,yCAAyC,iCAAiC;QAC1E,gHAAgH,mBAAmB,EAAE;QACrI;QACA;;QAEA;QACA;QACA;QACA,2BAA2B,0BAA0B,EAAE;QACvD,iCAAiC,eAAe;QAChD;QACA;QACA;;QAEA;QACA,sDAAsD,+DAA+D;;QAErH;QACA;;;QAGA;QACA;;;;;;;;;;;;;AClFa;AACb,8CAA8C,cAAc;AAC5D;AACA;AACA;AACA;AACA;AACA;AACA;AACA,CAAC;AACD;;;;;;;;;;;;;ACVa;AACb,8CAA8C,cAAc;AAC5D;AACA;AACA;AACA;AACA;AACA;AACA;AACA,CAAC;AACD;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA,CAAC;AACD;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA,CAAC;AACD;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA,CAAC;AACD;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA,CAAC;AACD;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA,CAAC;AACD;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA,CAAC,4BAA4B;AAC7B;;;;;;;;;;;;;AClEa;AACb;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA,8CAA8C,cAAc;AAC5D,cAAc,mBAAO,CAAC,sCAAS;AAC/B,mCAAmC,mBAAO,CAAC,gFAA8B;AACzE,mBAAmB,mBAAO,CAAC,gDAAc;AACzC;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA,sCAAsC,EAAE;AACxC;AACA;AACA,iBAAiB;AACjB;AACA;AACA;AACA,aAAa;AACb,SAAS;AACT;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA,SAAS;AACT;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA,iBAAiB;AACjB;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA,qBAAqB;AACrB,iBAAiB;AACjB;AACA;AACA;AACA,aAAa;AACb;AACA;AACA;AACA;AACA;AACA;AACA,iBAAiB;AACjB;AACA;AACA,iBAAiB;AACjB;AACA;AACA;AACA,aAAa;AACb;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA,CAAC;AACD;;;;;;;;;;;;;ACzKa;AACb;AACA;AACA;AACA;AACA;AACA,8CAA8C,cAAc;AAC5D,oBAAoB,mBAAO,CAAC,kDAAe;AAC3C,mBAAmB,mBAAO,CAAC,gDAAc;AACzC,cAAc,mBAAO,CAAC,sCAAS;AAC/B;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA,4DAA4D;AAC5D,2DAA2D;AAC3D,4DAA4D;AAC5D,0DAA0D;AAC1D,0DAA0D;AAC1D,oEAAoE;AACpE,6DAA6D;AAC7D,gEAAgE;AAChE;AACA;AACA;AACA,2DAA2D;AAC3D;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA,4FAA4F,gBAAgB;AAC5G;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA,SAAS;AACT;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA,aAAa;AACb;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA,iBAAiB;AACjB;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA,4CAA4C,cAAc,GAAG,eAAe,GAAG,eAAe;AAC9F;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA,yEAAyE,eAAe;AACxF;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA,kEAAkE;AAClE;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA,SAAS;AACT;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA,CAAC;AACD;;;;;;;;;;;;;ACrZa;AACb;AACA;AACA;AACA;AACA;AACA;AACA;AACA,8CAA8C,cAAc;AAC5D,cAAc,mBAAO,CAAC,sCAAS;AAC/B,oBAAoB,mBAAO,CAAC,kDAAe;AAC3C;AACA;AACA;AACA;AACA;AACA;AACA;AACA,4BAA4B;AAC5B;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA,4BAA4B;AAC5B;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA,6BAA6B;AAC7B;AACA,yBAAyB;AACzB,qBAAqB;AACrB;AACA;AACA;AACA;AACA;AACA;AACA;AACA,6BAA6B;AAC7B;AACA;AACA,6BAA6B;AAC7B;AACA;AACA;AACA,yBAAyB;AACzB,qBAAqB;AACrB;AACA;AACA;AACA;AACA;AACA;AACA,aAAa;AACb;AACA;AACA,aAAa;AACb;AACA;AACA;AACA;AACA;AACA,SAAS;AACT;AACA;AACA;AACA;AACA;AACA;AACA;AACA,aAAa;AACb,SAAS;AACT;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA,SAAS;AACT;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA,CAAC;AACD;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA,CAAC;AACD;;;;;;;;;;;;;AChIa;AACb,8CAA8C,cAAc;AAC5D;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA,2BAA2B,eAAe;AAC1C;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA,yDAAyD,UAAU;AACnE;AACA;AACA;AACA;AACA;AACA,iBAAiB;AACjB;AACA;AACA;AACA;AACA,iBAAiB;AACjB;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA,8BAA8B,eAAe;AAC7C;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA,iBAAiB;AACjB;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA,CAAC;AACD;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA,CAAC;AACD","file":"rectPlayer.js","sourcesContent":["(function webpackUniversalModuleDefinition(root, factory) {\n\tif(typeof exports === 'object' && typeof module === 'object')\n\t\tmodule.exports = factory();\n\telse if(typeof define === 'function' && define.amd)\n\t\tdefine([], factory);\n\telse {\n\t\tvar a = factory();\n\t\tfor(var i in a) (typeof exports === 'object' ? exports : root)[i] = a[i];\n\t}\n})(window, function() {\nreturn "," \t// The module cache\n \tvar installedModules = {};\n\n \t// The require function\n \tfunction __webpack_require__(moduleId) {\n\n \t\t// Check if module is in cache\n \t\tif(installedModules[moduleId]) {\n \t\t\treturn installedModules[moduleId].exports;\n \t\t}\n \t\t// Create a new module (and put it into the cache)\n \t\tvar module = installedModules[moduleId] = {\n \t\t\ti: moduleId,\n \t\t\tl: false,\n \t\t\texports: {}\n \t\t};\n\n \t\t// Execute the module function\n \t\tmodules[moduleId].call(module.exports, module, module.exports, __webpack_require__);\n\n \t\t// Flag the module as loaded\n \t\tmodule.l = true;\n\n \t\t// Return the exports of the module\n \t\treturn module.exports;\n \t}\n\n\n \t// expose the modules object (__webpack_modules__)\n \t__webpack_require__.m = modules;\n\n \t// expose the module cache\n \t__webpack_require__.c = installedModules;\n\n \t// define getter function for harmony exports\n \t__webpack_require__.d = function(exports, name, getter) {\n \t\tif(!__webpack_require__.o(exports, name)) {\n \t\t\tObject.defineProperty(exports, name, { enumerable: true, get: getter });\n \t\t}\n \t};\n\n \t// define __esModule on exports\n \t__webpack_require__.r = function(exports) {\n \t\tif(typeof Symbol !== 'undefined' && Symbol.toStringTag) {\n \t\t\tObject.defineProperty(exports, Symbol.toStringTag, { value: 'Module' });\n \t\t}\n \t\tObject.defineProperty(exports, '__esModule', { value: true });\n \t};\n\n \t// create a fake namespace object\n \t// mode & 1: value is a module id, require it\n \t// mode & 2: merge all properties of value into the ns\n \t// mode & 4: return value when already ns object\n \t// mode & 8|1: behave like require\n \t__webpack_require__.t = function(value, mode) {\n \t\tif(mode & 1) value = __webpack_require__(value);\n \t\tif(mode & 8) return value;\n \t\tif((mode & 4) && typeof value === 'object' && value && value.__esModule) return value;\n \t\tvar ns = Object.create(null);\n \t\t__webpack_require__.r(ns);\n \t\tObject.defineProperty(ns, 'default', { enumerable: true, value: value });\n \t\tif(mode & 2 && typeof value != 'string') for(var key in value) __webpack_require__.d(ns, key, function(key) { return value[key]; }.bind(null, key));\n \t\treturn ns;\n \t};\n\n \t// getDefaultExport function for compatibility with non-harmony modules\n \t__webpack_require__.n = function(module) {\n \t\tvar getter = module && module.__esModule ?\n \t\t\tfunction getDefault() { return module['default']; } :\n \t\t\tfunction getModuleExports() { return module; };\n \t\t__webpack_require__.d(getter, 'a', getter);\n \t\treturn getter;\n \t};\n\n \t// Object.prototype.hasOwnProperty.call\n \t__webpack_require__.o = function(object, property) { return Object.prototype.hasOwnProperty.call(object, property); };\n\n \t// __webpack_public_path__\n \t__webpack_require__.p = \"\";\n\n\n \t// Load entry module and return exports\n \treturn __webpack_require__(__webpack_require__.s = \"./RectPlayer/RectPlayer.ts\");\n","\"use strict\";\r\nObject.defineProperty(exports, \"__esModule\", { value: true });\r\n/**\r\n * 播放器单元\r\n */\r\nvar PlayerItem = /** @class */ (function () {\r\n    function PlayerItem() {\r\n    }\r\n    return PlayerItem;\r\n}());\r\nexports.PlayerItem = PlayerItem;\r\n","\"use strict\";\r\nObject.defineProperty(exports, \"__esModule\", { value: true });\r\n/**\r\n * 播放列表信息\r\n * */\r\nvar PlayList = /** @class */ (function () {\r\n    function PlayList() {\r\n    }\r\n    return PlayList;\r\n}());\r\nexports.PlayList = PlayList;\r\n/**\r\n * 歌曲信息\r\n * */\r\nvar Track = /** @class */ (function () {\r\n    function Track() {\r\n    }\r\n    return Track;\r\n}());\r\nexports.Track = Track;\r\n/**\r\n * 歌手信息\r\n * */\r\nvar Author = /** @class */ (function () {\r\n    function Author() {\r\n    }\r\n    return Author;\r\n}());\r\nexports.Author = Author;\r\n/**\r\n * 封面信息\r\n * */\r\nvar Avatar = /** @class */ (function () {\r\n    function Avatar() {\r\n    }\r\n    return Avatar;\r\n}());\r\nexports.Avatar = Avatar;\r\n/**\r\n *\r\n * */\r\nvar RectPlayerOption = /** @class */ (function () {\r\n    function RectPlayerOption() {\r\n    }\r\n    return RectPlayerOption;\r\n}());\r\nexports.RectPlayerOption = RectPlayerOption;\r\n/**\r\n *\r\n */\r\nvar Point = /** @class */ (function () {\r\n    function Point() {\r\n    }\r\n    return Point;\r\n}());\r\nexports.Point = Point;\r\n/**\r\n *\r\n */\r\nvar PlayMode;\r\n(function (PlayMode) {\r\n    PlayMode[\"normal\"] = \"normal\";\r\n    PlayMode[\"repeat\"] = \"repeat\";\r\n    PlayMode[\"repeatone\"] = \"repeatone\";\r\n    PlayMode[\"random\"] = \"random\";\r\n})(PlayMode || (PlayMode = {}));\r\nexports.PlayMode = PlayMode;\r\n","\"use strict\";\r\n/**\r\n * @Y_Theta http://blog.y-theta.cn\r\n *\r\n * An audio player based on\r\n * Skplayer       https://github.com/wangpengfei15975/skPlayer\r\n * netmusic-node  https://github.com/sqaiyan/netmusic-node\r\n *\r\n */\r\nObject.defineProperty(exports, \"__esModule\", { value: true });\r\nvar Utils_1 = require(\"./Utils\");\r\nvar RectplayerTemplateResolver_1 = require(\"./RectplayerTemplateResolver\");\r\nvar SourceCore_1 = require(\"./SourceCore\");\r\nvar RectPlayer = /** @class */ (function () {\r\n    function RectPlayer(option) {\r\n        this._loaded = false;\r\n        this._srcResolver = null;\r\n        this._templateResolver = null;\r\n        this._playerControl = null;\r\n        this._listuid = null;\r\n        this._playlist = null;\r\n        this._async = true;\r\n        Utils_1.Utils._enablelog = option.EnableLog || false;\r\n        this._scriptcache = new Map();\r\n        this._templateResolver = option.Reslover || new RectplayerTemplateResolver_1.DefaultTemplateResolver();\r\n        this._async = option.Async == null ? true : option.Async;\r\n        this._listuid = option.PlaylistId;\r\n        this._srcResolver = new SourceCore_1.NeteaseCore();\r\n        this.loadDependenceAsync();\r\n        Utils_1.Utils.Log(\"\\\\ RectPlayer  1.0.0 \\n\\\\ @Y_Theta \\n\\\\ http:\\\\\\\\blog.y-theta.com \\n\\\\ Starting ....\");\r\n    }\r\n    /**\r\n     * 获取播放列表\r\n     */\r\n    RectPlayer.prototype.getPlayList = function (id) {\r\n        if (this._srcResolver)\r\n            this._srcResolver.GetPlaylist(id);\r\n    };\r\n    /**\r\n     * 异步加载依赖文件\r\n     */\r\n    RectPlayer.prototype.loadDependenceAsync = function () {\r\n        var _this = this;\r\n        var dependencefile = [\r\n            Utils_1.Utils.Path() + \"/less.min.js\",\r\n            Utils_1.Utils.Path(\"resource\") + \"/javascript/lib/anime.min.js\"\r\n        ];\r\n        dependencefile.forEach(function (element) {\r\n            _this._scriptcache.set(element, null);\r\n            Utils_1.Utils.Ajax({\r\n                async: true,\r\n                url: element,\r\n                prepare: function () { },\r\n                success: function (data) {\r\n                    _this._scriptcache.set(element, data);\r\n                },\r\n                failed: function (status) {\r\n                    Utils_1.Utils.Log(\"faild : \" + element + \"  code \" + status);\r\n                }\r\n            });\r\n        });\r\n        this.waitAsync();\r\n    };\r\n    /**\r\n     * 异步等待文件加载完成\r\n     */\r\n    RectPlayer.prototype.waitAsync = function () {\r\n        var fecthed = true;\r\n        this._scriptcache.forEach(function (v) {\r\n            if (v == null || v == \"\")\r\n                fecthed = false;\r\n        });\r\n        if (!fecthed)\r\n            setTimeout(this.waitAsync.bind(this), 200);\r\n        else {\r\n            this._loaded = true;\r\n        }\r\n    };\r\n    /**\r\n     * 更改播放器的播放模式\r\n     * @param mode\r\n     * 播放模式 以下几种之一\r\n     * Netease | LocalFile\r\n     */\r\n    RectPlayer.prototype.SwitchMode = function (mode) {\r\n        this._mode = mode;\r\n        this._srcResolver = null;\r\n        if (this._mode === \"Netease\") {\r\n            this._srcResolver = new SourceCore_1.NeteaseCore();\r\n        }\r\n        else if (this._mode === \"LocalFile\") {\r\n            this._srcResolver = new SourceCore_1.LocalCore();\r\n        }\r\n    };\r\n    /**\r\n     * 解析模板并将其加载到当前页面中\r\n     */\r\n    RectPlayer.prototype.TryResolve = function () {\r\n        /**\r\n         * 确认依赖加载完成\r\n         */\r\n        this.resolve();\r\n    };\r\n    /**\r\n     *\r\n     */\r\n    RectPlayer.prototype.resolve = function () {\r\n        var _this = this;\r\n        if (!this._loaded) {\r\n            setTimeout(this.resolve.bind(this), 200);\r\n        }\r\n        else {\r\n            // 请求样式页\r\n            Utils_1.Utils.Ajax({\r\n                async: true,\r\n                url: Utils_1.Utils.Path() + \"/template/style.less\",\r\n                prepare: function () {\r\n                    Utils_1.Utils.Log(\"GetTemplate Less !\");\r\n                },\r\n                success: function (data) {\r\n                    less.render(data, function (e, o) {\r\n                        var style = document.createElement(\"style\");\r\n                        style.type = \"text/css\";\r\n                        style.innerHTML = o.css;\r\n                        document\r\n                            .getElementsByTagName(\"head\")\r\n                            .item(0)\r\n                            .appendChild(style);\r\n                    });\r\n                },\r\n                failed: function () {\r\n                    Utils_1.Utils.Log(\"Faild !\");\r\n                }\r\n            });\r\n            //请求模板\r\n            Utils_1.Utils.Ajax({\r\n                async: true,\r\n                url: Utils_1.Utils.Path() + \"/template/Template.xml\",\r\n                prepare: function () {\r\n                    Utils_1.Utils.Log(\"GetTemplate !\");\r\n                },\r\n                success: function (data) {\r\n                    _this._async ? _this.loadlistAsync(data) : _this.loadlist(data);\r\n                },\r\n                failed: function () {\r\n                    Utils_1.Utils.Log(\"Faild !\");\r\n                }\r\n            });\r\n        }\r\n    };\r\n    RectPlayer.prototype.loadlist = function (data) {\r\n        var temp = this._templateResolver.ResloveTemplate(data);\r\n        document.body.appendChild(temp.View);\r\n        this._playerControl = temp.Control;\r\n    };\r\n    RectPlayer.prototype.loadlistAsync = function (data) {\r\n        var temp = this._templateResolver.ResloveTemplate(data);\r\n        document.body.appendChild(temp.View);\r\n        this._playerControl = temp.Control;\r\n        this.getPlayList(this._listuid);\r\n        setTimeout(this.rendertemplate.bind(this), 100);\r\n    };\r\n    RectPlayer.prototype.rendertemplate = function () {\r\n        this._srcResolver.Loaded ?\r\n            (this._playlist = this._srcResolver.Playlist, this._templateResolver.RenderTemplate(this._playlist)) :\r\n            (this._srcResolver.Timeout ? Utils_1.Utils.Log(\"No Song Fetched ! TimeOut\") : setTimeout(this.rendertemplate.bind(this), 100));\r\n    };\r\n    return RectPlayer;\r\n}());\r\nexports.RectPlayer = RectPlayer;\r\n","\"use strict\";\r\n/**\r\n *\r\n * 模板解析类,用于定义如何解析其Html模板\r\n *\r\n * */\r\nObject.defineProperty(exports, \"__esModule\", { value: true });\r\nvar PlayerModel_1 = require(\"./PlayerModel\");\r\nvar PlayerItem_1 = require(\"./PlayerItem\");\r\nvar Utils_1 = require(\"./Utils\");\r\n/**\r\n * 默认的播放器样式解析器\r\n * 根据模板中定义的关键字解析模板\r\n * */\r\nvar DefaultTemplateResolver = /** @class */ (function () {\r\n    function DefaultTemplateResolver() {\r\n        this._playerelement = null;\r\n        this._listtemplate = null;\r\n        this._liststatus = false;\r\n        this._panelstatus = false;\r\n        this._mute = false;\r\n        this._playing = true;\r\n        this._songid = -1;\r\n        this._playerctl = new Map();\r\n        this._volume = 0;\r\n        this._volumebak = 0;\r\n        this._volumemax = 6000;\r\n        this._playmode = PlayerModel_1.PlayMode.normal;\r\n        this._playmodeloop = [PlayerModel_1.PlayMode.normal, PlayerModel_1.PlayMode.repeat, PlayerModel_1.PlayMode.repeatone, PlayerModel_1.PlayMode.random];\r\n        this._playlist = null;\r\n    }\r\n    //#region Interface Function\r\n    DefaultTemplateResolver.prototype.Play = function (id) { };\r\n    DefaultTemplateResolver.prototype.Pause = function () { };\r\n    DefaultTemplateResolver.prototype.Resume = function () { };\r\n    DefaultTemplateResolver.prototype.Next = function () { };\r\n    DefaultTemplateResolver.prototype.Prve = function () { };\r\n    DefaultTemplateResolver.prototype.Playlist = function (action) { };\r\n    DefaultTemplateResolver.prototype.Add = function (song) { };\r\n    DefaultTemplateResolver.prototype.Remove = function (song) { };\r\n    DefaultTemplateResolver.prototype.SwitchMode = function (mode) {\r\n        this.switchmode(mode);\r\n    };\r\n    DefaultTemplateResolver.prototype.About = function () { };\r\n    //#endregion\r\n    /**\r\n     * 解析播放器模板\r\n     * @param oritemplate  模板html\r\n     * @param data         播放列表数据\r\n     */\r\n    DefaultTemplateResolver.prototype.ResloveTemplate = function (oritemplate) {\r\n        //Utils.Log(XML.xml2js(oritemplate));\r\n        this._playerelement = document.createElement(\"div\");\r\n        this._playerelement.id = \"rectPlayer\";\r\n        var result = /<player>([\\s\\S]*?)<\\/player>[\\s\\S]*?<listitem>([\\s\\S]*?)<\\/listitem>/im.exec(oritemplate);\r\n        var playerdom = this.parseDom(result[1]);\r\n        this._listtemplate = result[2];\r\n        //#region GetElementref\r\n        this.loadcontrol(playerdom);\r\n        //#endregion\r\n        //#region 开关控制\r\n        this.$g(\"ctl-play\").onclick = this.playpause.bind(this);\r\n        this.pause();\r\n        this.$g(\"openpanel\").onclick = this.openctlpanel.bind(this);\r\n        this.$g(\"openlist\").onclick = this.openlist.bind(this);\r\n        this.$g(\"volume-track\").onclick = this.volumetrackclick.bind(this);\r\n        this.$g(\"ctl-mute\").onclick = this.volumeclick.bind(this);\r\n        this.$g(\"volume\").addEventListener(\"DOMMouseScroll\", this.volumescroll.bind(this), { passive: true });\r\n        this.$g(\"volume\").onmousewheel = this.volumescroll.bind(this);\r\n        this.$g(\"mode\").addEventListener(\"click\", this.setmode.bind(this));\r\n        this.switchmode(this._playmode);\r\n        this.$g(\"list-detail\").onclick = this.listClick.bind(this);\r\n        this.$g(\"list-detail\").ondblclick = this.listDbClick.bind(this);\r\n        this.setVolume(this._volumemax / 2);\r\n        //#endregion\r\n        this._playerelement.append(playerdom);\r\n        var playeritem = new PlayerItem_1.PlayerItem();\r\n        playeritem.View = this._playerelement;\r\n        playeritem.Control = this;\r\n        this._playerctl.forEach(function (v) {\r\n            v.removeAttribute(\"id\");\r\n        });\r\n        return playeritem;\r\n    };\r\n    DefaultTemplateResolver.prototype.RenderTemplate = function (data) {\r\n        var _this = this;\r\n        this._playlist = data;\r\n        if (this._playlist) {\r\n            this.$g(\"list-detail\").innerHTML = null;\r\n            this._playlist.tracks.forEach(function (v, i, ins) {\r\n                var listitem = _this.parseDom(_this._listtemplate);\r\n                var liid = listitem.querySelector(\"#id\");\r\n                liid.innerHTML = \"\" + (i + 1);\r\n                liid.removeAttribute(\"id\");\r\n                var liname = listitem.querySelector(\"#info\");\r\n                liname.innerHTML = \"\" + v.name + (v.ar[0] && \"-\" + v.ar[0].name);\r\n                liname.removeAttribute(\"id\");\r\n                _this.$g(\"list-detail\").appendChild(listitem.childNodes[0]);\r\n            });\r\n        }\r\n        Utils_1.Utils.Log(this._playlist.tracks[0].al.url);\r\n        this._songid = 0;\r\n        this.updateUI(this._songid);\r\n    };\r\n    /**\r\n     *\r\n     */\r\n    DefaultTemplateResolver.prototype.updateUI = function (id) {\r\n        if (id < this._playlist.tracks.length && this._playlist.tracks[id]) {\r\n            this.$g(\"cover-avatar\").style.backgroundImage = \"url(\" + this._playlist.tracks[id].al.url + \")\";\r\n            this.$g(\"source\").setAttribute(\"src\", this._playlist.tracks[id].src);\r\n            this.$g(\"name\").innerHTML = this._playlist.tracks[id].name;\r\n            this.$g(\"author\").innerHTML = this._playlist.tracks[id].ar[0].name;\r\n        }\r\n    };\r\n    //#region 播放列表/控制面板\r\n    DefaultTemplateResolver.prototype.openlist = function (e) {\r\n        this._liststatus = !this._liststatus;\r\n        if (this._liststatus) {\r\n            this.switchElementStatus(this._playerelement, \"list-on\", \"list-off\");\r\n        }\r\n        else {\r\n            this.switchElementStatus(this._playerelement, \"list-off\", \"list-on\");\r\n        }\r\n    };\r\n    DefaultTemplateResolver.prototype.openctlpanel = function (e) {\r\n        var _this = this;\r\n        this._panelstatus = !this._panelstatus;\r\n        if (this._panelstatus) {\r\n            this.switchElementStatus(this._playerelement, \"panel-on\", \"panel-off\");\r\n        }\r\n        else {\r\n            if (this._playerelement.classList.contains(\"list-on\")) {\r\n                this._liststatus = false;\r\n                this.switchElementStatus(this._playerelement, \"list-off\", \"list-on\");\r\n                setTimeout(function (that) {\r\n                    that.switchElementStatus(_this._playerelement, \"panel-off\", \"panel-on\");\r\n                }, 240, this);\r\n            }\r\n            else {\r\n                this.switchElementStatus(this._playerelement, \"panel-off\", \"panel-on\");\r\n            }\r\n        }\r\n    };\r\n    //#endregion\r\n    //#region 音量调整\r\n    /**\r\n     * 静音\r\n     */\r\n    DefaultTemplateResolver.prototype.volumeclick = function (e) {\r\n        this.setMute(!this._mute);\r\n        this.setVolume(this._volume);\r\n    };\r\n    /**\r\n     * 音量单击调整\r\n     */\r\n    DefaultTemplateResolver.prototype.volumetrackclick = function (e) {\r\n        var clip = this.$g(\"volume\").getBoundingClientRect();\r\n        //   console.log(e, clip);\r\n        var cw = clip.width / 2;\r\n        var ch = clip.height / 2;\r\n        var x1 = e.clientX - clip.x, y1 = e.clientY - clip.y;\r\n        var angle = this.getcrosslineAngle({ x: cw, y: 0 }, { x: x1, y: y1 }, { x: cw, y: ch });\r\n        this._mute = false;\r\n        this._volume = (angle / 360) * this._volumemax;\r\n        this.setVolume(this._volume);\r\n    };\r\n    /**\r\n     * 音量滚动调整\r\n     */\r\n    DefaultTemplateResolver.prototype.volumescroll = function (e) {\r\n        e = e || window.event;\r\n        var data;\r\n        if (e.wheelDelta) {\r\n            //IE/Opera/Chrome\r\n            data = e.wheelDelta;\r\n        }\r\n        else if (e.detail) {\r\n            //Firefox\r\n            data = e.detail;\r\n        }\r\n        this._mute && this.setMute(false);\r\n        this._volume += data;\r\n        this.setVolume(this._volume);\r\n    };\r\n    /**\r\n     * 设置音量\r\n     */\r\n    DefaultTemplateResolver.prototype.setVolume = function (v) {\r\n        this._volume = v < this._volumemax ? (v < 0 ? 0 : v) : this._volumemax;\r\n        var newpath = this.parsePercent(this._volume / this._volumemax, { x: 32, y: 32 }, 24);\r\n        this.$g(\"volume-path\").setAttribute(\"d\", newpath);\r\n        var volume = this.$g(\"volume\");\r\n        if (this._volume == 0) {\r\n            volume.classList.add(\"mute\");\r\n        }\r\n        else {\r\n            volume.classList.contains(\"mute\") ? volume.classList.remove(\"mute\") : null;\r\n        }\r\n        this.$g(\"source\").volume = this._volume / this._volumemax;\r\n    };\r\n    /**\r\n     * 设置静音\r\n     */\r\n    DefaultTemplateResolver.prototype.setMute = function (flag) {\r\n        this._mute = flag;\r\n        Utils_1.Utils.Log(\"Mute :\" + flag);\r\n        if (flag) {\r\n            this._volumebak = this._volume;\r\n            this._volume = 0;\r\n        }\r\n        else {\r\n            this._volume = this._volumebak;\r\n        }\r\n    };\r\n    //#endregion\r\n    //#region 设置播放模式\r\n    DefaultTemplateResolver.prototype.setmode = function () {\r\n        var nowindex = this._playmodeloop.indexOf(this._playmode);\r\n        nowindex = (nowindex + 1) % this._playmodeloop.length;\r\n        this.switchmode(this._playmodeloop[nowindex]);\r\n    };\r\n    DefaultTemplateResolver.prototype.switchmode = function (mode) {\r\n        Utils_1.Utils.Log([this._playmode, mode]);\r\n        this.switchElementStatus(this.$g(\"mode\"), mode, this._playmode);\r\n        this._playmode = mode;\r\n    };\r\n    //#endregion\r\n    //#region 播放暂停控制\r\n    DefaultTemplateResolver.prototype.playpause = function (e) {\r\n        this._playing ? this.pause() : this.resume();\r\n    };\r\n    DefaultTemplateResolver.prototype.resume = function () {\r\n        if (this._playing)\r\n            return;\r\n        this._playing = true;\r\n        this.switchElementStatus(this._playerelement, \"play\", \"pause\");\r\n        this.$g(\"source\").play();\r\n    };\r\n    DefaultTemplateResolver.prototype.pause = function () {\r\n        if (!this._playing)\r\n            return;\r\n        this._playing = false;\r\n        this.switchElementStatus(this._playerelement, \"pause\", \"play\");\r\n        this.$g(\"source\").pause();\r\n    };\r\n    DefaultTemplateResolver.prototype.play = function (id) {\r\n        if (id < 0 || id == this._songid)\r\n            return;\r\n        this._songid = id;\r\n        this.updateUI(this._songid);\r\n        this._playing = true;\r\n        this.switchElementStatus(this._playerelement, \"play\", \"pause\");\r\n        this.$g(\"source\").play();\r\n    };\r\n    DefaultTemplateResolver.prototype.prve = function () {\r\n        if (this._songid < 0)\r\n            return;\r\n        this._songid = this._songid > 0 ? this._songid - 1 : 0;\r\n        this.play(this._songid);\r\n    };\r\n    DefaultTemplateResolver.prototype.next = function () {\r\n        if (this._songid < 0)\r\n            return;\r\n        this._songid =\r\n            this._songid < this._playlist.tracks.length - 1 ? this._songid + 1 : this._playlist.tracks.length - 1;\r\n        this.play(this._songid);\r\n    };\r\n    //#endregion\r\n    DefaultTemplateResolver.prototype.listClick = function (e) {\r\n        var ev = e || window.event;\r\n        var tar = ev.target;\r\n        // Utils.Log(tar.tagName);\r\n        if (tar && tar.tagName.toUpperCase() === \"LI\") {\r\n            Utils_1.Utils.Log(tar.childNodes[1].innerText);\r\n        }\r\n    };\r\n    DefaultTemplateResolver.prototype.listDbClick = function (e) {\r\n        var ev = e || window.event;\r\n        var tar = ev.target;\r\n        // Utils.Log(tar.tagName);\r\n        if (tar && tar.tagName.toUpperCase() === \"LI\") {\r\n            var songid = ~~tar.childNodes[1].innerText;\r\n            Utils_1.Utils.Log(songid);\r\n            this.play(songid - 1);\r\n        }\r\n    };\r\n    DefaultTemplateResolver.prototype.listSelect = function (id) { };\r\n    /**\r\n     * 装填控件字典\r\n     * @param rootdom\r\n     */\r\n    DefaultTemplateResolver.prototype.loadcontrol = function (rootdom) {\r\n        var _this = this;\r\n        this._playerctl = this._playerctl || new Map();\r\n        var controldic = [\r\n            \"list-detail\",\r\n            \"source\",\r\n            \"cover-avatar\",\r\n            \"cover-resolve\",\r\n            \"cover-static\",\r\n            \"ctl-play\",\r\n            \"name\",\r\n            \"author\",\r\n            \"track-loding\",\r\n            \"track-pos\",\r\n            \"track-thumb\",\r\n            \"time-now\",\r\n            \"volume\",\r\n            \"ctl-mute\",\r\n            \"volume-path\",\r\n            \"volume-track\",\r\n            \"mode\",\r\n            \"ctl-fore\",\r\n            \"ctl-prve\",\r\n            \"openlist\",\r\n            \"openpanel\",\r\n            \"ctl-listadd\",\r\n            \"ctl-listremove\",\r\n            \"ctl-about\"\r\n        ];\r\n        controldic.forEach(function (item) {\r\n            _this._playerctl.set(item, rootdom.querySelector(\"#\" + item));\r\n        });\r\n    };\r\n    //#region UtilFunction\r\n    /**\r\n     * 获取控件字典中对应项\r\n     */\r\n    DefaultTemplateResolver.prototype.$g = function (ctl) {\r\n        return this._playerctl.get(ctl);\r\n    };\r\n    /**\r\n     * 将文本转化为dom对象，方便使用筛选器进行查询\r\n     * @param arg 要转换为dom对象的文本\r\n     */\r\n    DefaultTemplateResolver.prototype.parseDom = function (arg) {\r\n        var objE = document.createElement(\"div\");\r\n        objE.innerHTML = arg.replace(/(>)\\s+?(<)/gm, \"$1$2\").trim();\r\n        return objE;\r\n    };\r\n    /**\r\n     * 将百分比转化为svg的环形\r\n     */\r\n    DefaultTemplateResolver.prototype.parsePercent = function (percent, center, radius) {\r\n        var A = percent * Math.PI * 2;\r\n        var x = radius * Math.sin(A);\r\n        var y = radius * Math.cos(A);\r\n        x = center.x + x;\r\n        y = center.y - y;\r\n        var t = center.y - radius;\r\n        if (percent < 0.5)\r\n            return \"M \" + center.x + \",\" + t + \" A \" + radius + \" \" + radius + \" 0 0 1 \" + x + \" \" + y;\r\n        else if (percent == 1)\r\n            return \"M \" + center.x + \",\" + t + \" A \" + radius + \" \" + radius + \"  0 1 1 \" + (x - 0.01) + \" \" + y;\r\n        else\r\n            return \"M \" + center.x + \",\" + t + \" A \" + radius + \" \" + radius + \"  0 1 1 \" + x + \" \" + y;\r\n    };\r\n    /**\r\n     * 获取两直线夹角\r\n     * 直线由（p1 ,p） (p2 ,p) 确定\r\n     */\r\n    DefaultTemplateResolver.prototype.getcrosslineAngle = function (p1, p2, p) {\r\n        var x1 = p1.x - p.x;\r\n        var y1 = p1.y - p.y;\r\n        var x2 = p2.x - p.x;\r\n        var y2 = p2.y - p.y;\r\n        var dot = x1 * x2 + y1 * y2;\r\n        var det = x1 * y2 - y1 * x2;\r\n        var angle = (Math.atan2(det, dot) / Math.PI) * 180;\r\n        return (angle + 360) % 360;\r\n    };\r\n    /**\r\n     *\r\n     * @param element\r\n     * @param tip\r\n     */\r\n    DefaultTemplateResolver.prototype.setElementTip = function (element, tip) {\r\n        element && (element.title = tip);\r\n    };\r\n    /**\r\n     *\r\n     * @param element 需要设置的元素\r\n     * @param normal 元素的默认状态\r\n     * @param active 元素的变化状态\r\n     */\r\n    DefaultTemplateResolver.prototype.switchElementStatus = function (element, normal, active) {\r\n        if (element) {\r\n            var classl = element.classList;\r\n            // prepare && prepare(normal);\r\n            if (normal == null) {\r\n                classl.contains(active) ? classl.remove(active) : null;\r\n                return;\r\n            }\r\n            else {\r\n                classl.contains(normal)\r\n                    ? null\r\n                    : classl.contains(active)\r\n                        ? (classl.remove(active), classl.add(normal))\r\n                        : classl.add(normal);\r\n            }\r\n        }\r\n    };\r\n    return DefaultTemplateResolver;\r\n}());\r\nexports.DefaultTemplateResolver = DefaultTemplateResolver;\r\n","\"use strict\";\r\n/**\r\n *\r\n * @Y_Theta http://blog.y-theta.cn\r\n *\r\n * PlayerCoreContract\r\n *\r\n */\r\nObject.defineProperty(exports, \"__esModule\", { value: true });\r\nvar Utils_1 = require(\"./Utils\");\r\nvar PlayerModel_1 = require(\"./PlayerModel\");\r\n/** 网易云音乐资源 */\r\nvar NeteaseCore = /** @class */ (function () {\r\n    function NeteaseCore() {\r\n        this.Loaded = false;\r\n        this.Playlist = null;\r\n        this.Timeout = false;\r\n        this._loaded = false;\r\n        this._timeout = 500; //单首歌抓取超时 平均\r\n        this._timeouttimer = 0;\r\n    }\r\n    NeteaseCore.prototype.GetPlaylist = function (url) {\r\n        if (url)\r\n            this.getneteasePlayListbyID(url);\r\n    };\r\n    NeteaseCore.prototype.getneteasePlayListbyID = function (id) {\r\n        var _this = this;\r\n        var orilist = null;\r\n        Utils_1.Utils.Ajax({\r\n            async: true,\r\n            url: \"http://api.y-theta.cn/Netease/playlist/detail?id=\" + id,\r\n            success: function (data) {\r\n                try {\r\n                    orilist = JSON.parse(data);\r\n                }\r\n                catch (_a) { }\r\n                if (orilist && orilist.code && orilist.code === 200) {\r\n                    var oripl = orilist.playlist;\r\n                    var pl_1 = new PlayerModel_1.PlayList();\r\n                    pl_1.avatarUrl = oripl.coverImgUrl;\r\n                    pl_1.nickname = oripl.name;\r\n                    pl_1.signature = oripl.id;\r\n                    pl_1.tracks = new Array();\r\n                    _this.Playlist = pl_1;\r\n                    oripl.tracks.forEach(function (t) {\r\n                        pl_1.tracks.push({\r\n                            id: t.id,\r\n                            name: t.name,\r\n                            src: null,\r\n                            al: {\r\n                                id: t.al.id,\r\n                                name: t.al.name,\r\n                                url: t.al.picUrl\r\n                            },\r\n                            ar: _this.getauthor(t.ar)\r\n                        });\r\n                    });\r\n                    pl_1.tracks.forEach(function (t) {\r\n                        Utils_1.Utils.Ajax({\r\n                            async: true,\r\n                            url: \"http://api.y-theta.cn/Netease/music/url?id=\" + t.id + \"&br=128000\",\r\n                            success: function (data) {\r\n                                Utils_1.Utils.Log(\"Song : \" + Utils_1.Utils.PadLeft(t.name, 16) + \"[ Fetched ]\");\r\n                                t.src = JSON.parse(data).data[0].url;\r\n                            },\r\n                            failed: function (status) {\r\n                                Utils_1.Utils.Log(status);\r\n                            },\r\n                            prepare: function () {\r\n                                Utils_1.Utils.Log(\"Song : \" + Utils_1.Utils.PadLeft(t.name, 16) + \"[ Fetching ]\");\r\n                            }\r\n                        });\r\n                    });\r\n                    _this._timeouttimer = _this._timeout * pl_1.tracks.length;\r\n                    setTimeout(_this.waitAsync.bind(_this), 100);\r\n                }\r\n                else {\r\n                    Utils_1.Utils.Log(\"Playlist Load Failed! Please try later or check if the id is right \");\r\n                }\r\n            },\r\n            failed: function (status) {\r\n                Utils_1.Utils.Log(\"Playlist Load Failed!\" + status);\r\n            },\r\n            prepare: function () {\r\n                _this.Loaded = false;\r\n                _this.Timeout = false;\r\n                Utils_1.Utils.Log(\"Getting Playlist\");\r\n            }\r\n        });\r\n    };\r\n    NeteaseCore.prototype.getauthor = function (ars) {\r\n        var arr = new Array();\r\n        ars.forEach(function (ar) {\r\n            arr.push({\r\n                id: ar.id,\r\n                name: ar.name\r\n            });\r\n        });\r\n        return arr;\r\n    };\r\n    NeteaseCore.prototype.waitAsync = function () {\r\n        var _this = this;\r\n        this._loaded = true;\r\n        this.Playlist.tracks.forEach(function (v) {\r\n            if (v.src == null)\r\n                _this._loaded = false;\r\n        });\r\n        this._timeouttimer -= 100;\r\n        Utils_1.Utils.Log(\"Fetch Song Timer : \" + this._timeouttimer);\r\n        if (this._timeouttimer < 0) {\r\n            this.Timeout = true;\r\n            return;\r\n        }\r\n        this._loaded ? (this.Loaded = true) : setTimeout(this.waitAsync.bind(this), 100);\r\n    };\r\n    return NeteaseCore;\r\n}());\r\nexports.NeteaseCore = NeteaseCore;\r\n/** 本地文件资源 */\r\nvar LocalCore = /** @class */ (function () {\r\n    function LocalCore() {\r\n        this.Timeout = false;\r\n    }\r\n    LocalCore.prototype.GetPlaylist = function (url) {\r\n        return null;\r\n    };\r\n    return LocalCore;\r\n}());\r\nexports.LocalCore = LocalCore;\r\n","\"use strict\";\r\nObject.defineProperty(exports, \"__esModule\", { value: true });\r\n/**\r\n *\r\n * @Y_Theta http://blog.y-theta.cn\r\n *\r\n * Utils\r\n *\r\n */\r\nvar Utils = /** @class */ (function () {\r\n    function Utils() {\r\n    }\r\n    Utils.extenddocready = function () {\r\n        var ie = !!(window.attachEvent && !window.opera);\r\n        var webkit = /webkit\\/(\\d+)/i.test(navigator.userAgent) && ~~RegExp.$1 < 525;\r\n        var fn = [];\r\n        var run = function () {\r\n            for (var i = 0; i < fn.length; i++)\r\n                fn[i]();\r\n        };\r\n        document.ready = function (f) {\r\n            if (!ie && !webkit && document.addEventListener) {\r\n                return document.addEventListener(\"DOMContentLoaded\", f, false);\r\n            }\r\n            if (fn.push(f) > 1)\r\n                return;\r\n            if (ie)\r\n                (function () {\r\n                    try {\r\n                        document.documentElement.scroll({ left: 0 });\r\n                        run();\r\n                    }\r\n                    catch (err) {\r\n                        setTimeout(arguments.callee, 0);\r\n                    }\r\n                })();\r\n            else if (webkit)\r\n                var t = setInterval(function () {\r\n                    if (/^(loaded|complete)$/.test(document.readyState))\r\n                        clearInterval(t), run();\r\n                }, 0);\r\n        };\r\n    };\r\n    Utils.hasChinese = function (temp) {\r\n        //var re = /.*[\\\\u4E00-\\\\u9FFF]+.*$/;\r\n        return escape(temp).indexOf(\"%u\") >= 0;\r\n    };\r\n    /**\r\n     * 输出函数\r\n     */\r\n    Utils.Log = function (obj) {\r\n        Utils._enablelog ? console.log(obj) : null;\r\n    };\r\n    /* 质朴长存法  by lifesinger */\r\n    Utils.PadLeft = function (num, n) {\r\n        var padnum = num.toString();\r\n        var len = num.toString().length;\r\n        var charp = typeof num == \"string\" ? (Utils.hasChinese(num) ? '\\u3000' : \" \") : \"0\";\r\n        while (len < n) {\r\n            padnum = charp + padnum;\r\n            len++;\r\n        }\r\n        return padnum;\r\n    };\r\n    /**\r\n     * 获取目录路径\r\n     */\r\n    Utils.Path = function (type) {\r\n        if (type === void 0) { type = \"root\"; }\r\n        switch (type) {\r\n            case \"resource\":\r\n                return Utils._respath;\r\n            case \"root\":\r\n                return (Utils._rootpath ||\r\n                    ((Utils._rootpath = document.URL.replace(/([\\s\\S]*)(\\/[^\\/]*?\\.html)/i, \"$1\")), Utils._rootpath));\r\n            case \"\":\r\n                break;\r\n        }\r\n    };\r\n    /**\r\n     *\r\n     * @param time\r\n     */\r\n    Utils.TimeFormat = function (time) {\r\n        var tempMin = time / 60;\r\n        var tempSec = time % 60;\r\n        var curMin = tempMin < 10 ? \"0\" + tempMin : tempMin;\r\n        var curSec = tempSec < 10 ? \"0\" + tempSec : tempSec;\r\n        return curMin + \":\" + curSec;\r\n    };\r\n    /**\r\n     *\r\n     * @param percent\r\n     */\r\n    Utils.PercentFormat = function (percent) {\r\n        return (percent * 100).toFixed(2) + \"%\";\r\n    };\r\n    /**\r\n     *\r\n     * @param option\r\n     */\r\n    Utils.Ajax = function (option) {\r\n        option.prepare && option.prepare();\r\n        var jslist = /\\/([\\S].+?js)\\??/gi.exec(option.url);\r\n        if (jslist && jslist.length > 0) {\r\n            var script_1 = document.createElement(\"script\");\r\n            script_1.type = \"text/javascript\";\r\n            script_1.onload = function (e) {\r\n                option.success && option.success(jslist[1]);\r\n            };\r\n            script_1.src = option.url;\r\n            try {\r\n                document.body.appendChild(script_1);\r\n            }\r\n            catch (err) {\r\n                document.ready == null ? Utils.extenddocready() : null;\r\n                document.ready(function () {\r\n                    document.body.appendChild(script_1);\r\n                });\r\n            }\r\n        }\r\n        else {\r\n            var xhr_1 = new XMLHttpRequest();\r\n            xhr_1.timeout = option.timeout || 5000;\r\n            xhr_1.onreadystatechange = function () {\r\n                if (xhr_1.readyState === 4) {\r\n                    // TODO:: 访问服务器文件与本地文件分别配置\r\n                    if (Utils.Path().indexOf(\"file:///\") == 0) {\r\n                        option.success && option.success(xhr_1.responseText);\r\n                    }\r\n                    else {\r\n                        if (xhr_1.status >= 200 && xhr_1.status < 300) {\r\n                            option.success && option.success(xhr_1.responseText);\r\n                        }\r\n                        else {\r\n                            option.failed && option.failed(xhr_1.status);\r\n                        }\r\n                    }\r\n                }\r\n            };\r\n            xhr_1.open(\"GET\", option.url, option.async);\r\n            xhr_1.send(null);\r\n        }\r\n    };\r\n    Utils._rootpath = null;\r\n    Utils._respath = \"http://res.y-theta.cn\";\r\n    Utils._enablelog = true;\r\n    return Utils;\r\n}());\r\nexports.Utils = Utils;\r\n/** 请求参数 */\r\nvar AjaxOption = /** @class */ (function () {\r\n    function AjaxOption(url, prepare, success, failed) {\r\n        this.url = url;\r\n        this.prepare = prepare;\r\n        this.success = success;\r\n        this.failed = failed;\r\n    }\r\n    return AjaxOption;\r\n}());\r\nexports.AjaxOption = AjaxOption;\r\n"],"sourceRoot":""}